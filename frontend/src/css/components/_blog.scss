@use "sass:map";
@use "../partials/variables" as v;
@use "../partials/functions" as f;

@layer components {
  body {
    margin: 0;
    padding: 0;
  }
  .site-header {
    background: color-mix(in srgb, var(--black) 65%, transparent);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    border-bottom: 1px solid color-mix(in srgb, var(--white) 7%, transparent);
    position: fixed;
    top: 0;
    inset-inline: 0;
    z-index: 100;
    transition: background 0.3s;

    &.sticky {
      background: color-mix(in srgb, var(--black) 92%, transparent);
    }

    .container {
      display: flex;
      align-items: center;
      height: f.rem(64);
      gap: f.rem(24);
    }

    .logo-link {
      font-size: f.rem(20);
      font-weight: 800;
      color: var(--white);
      text-decoration: none;
      letter-spacing: -0.02em;
      flex-shrink: 0;
      white-space: nowrap;
    }

    .main-nav {
      flex: 1;
      display: flex;
      align-items: center;
      gap: f.rem(8);

      &__list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        align-items: center;
        gap: f.rem(2);
      }

      &__link {
        display: block;
        color: color-mix(in srgb, var(--white) 72%, transparent);
        text-decoration: none;
        font-size: f.rem(14);
        font-weight: 500;
        padding: f.rem(6) f.rem(12);
        border-radius: f.rem(6);
        transition: color 0.2s, background 0.2s;

        &:hover {
          color: var(--white);
          background: color-mix(in srgb, var(--white) 9%, transparent);
        }
      }

      &__auth {
        margin-left: auto;
        display: flex;
        align-items: center;
        gap: f.rem(6);
      }

      &__cta {
        display: inline-flex;
        align-items: center;
        padding: f.rem(7) f.rem(16);
        border-radius: f.rem(6);
        font-size: f.rem(14);
        font-weight: 600;
        background-color: var(--indigo);
        color: var(--white);
        text-decoration: none;
        transition: background 0.2s;
        white-space: nowrap;

        &:hover {
          background-color: color-mix(in srgb, var(--indigo) 85%, black);
          color: var(--white);
        }
      }
    }

    .menu-btn {
      display: none;
      align-items: center;
      justify-content: center;
      color: var(--white);
      padding: f.rem(8);
      border-radius: f.rem(6);
      cursor: pointer;
      flex-shrink: 0;
      transition: background 0.2s;

      &:hover {
        background: color-mix(in srgb, var(--white) 10%, transparent);
      }

      svg {
        width: f.rem(22);
        height: f.rem(22);
        display: block;
      }
    }
  }

  @media (width <= 900px) {
    .site-header {
      .menu-btn {
        display: flex;
      }

      .main-nav {
        position: fixed;
        top: 0;
        right: -100%;
        bottom: 0;
        width: min(f.rem(300), 85vw);
        background-color: #111827;
        border-left: 1px solid color-mix(in srgb, var(--white) 8%, transparent);
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        padding: f.rem(80) f.rem(20) f.rem(32);
        gap: 0;
        transition: right 0.3s ease;
        z-index: 99;

        &.visible {
          right: 0;

          &::before {
            content: '';
            position: fixed;
            inset: 0;
            right: min(f.rem(300), 85vw);
            background: rgba(0, 0, 0, 0.55);
            z-index: -1;
          }
        }

        &__list {
          flex-direction: column;
          align-items: stretch;
          width: 100%;
          gap: 0;
        }

        &__link {
          display: block;
          padding: f.rem(13) f.rem(14);
          font-size: f.rem(15);
          border-radius: f.rem(8);
          color: color-mix(in srgb, var(--white) 80%, transparent);

          &:hover {
            color: var(--white);
            background: color-mix(in srgb, var(--white) 8%, transparent);
          }
        }

        &__auth {
          flex-direction: column;
          align-items: stretch;
          width: 100%;
          margin-left: 0;
          margin-top: f.rem(20);
          padding-top: f.rem(20);
          border-top: 1px solid color-mix(in srgb, var(--white) 10%, transparent);
          gap: f.rem(8);
        }

        &__cta {
          justify-content: center;
          padding: f.rem(11) f.rem(16);
        }
      }
    }
  }
  

  .blog {
    &__nav {
      background-color: var(--black);
      padding: f.rem(16) 0;
    }
    &__nav-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: f.rem(16);
    }
    &__nav-brand {
      color: var(--white);
      font-weight: 600;
      text-decoration: none;
    }
    &__nav-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: f.rem(8);
    }
    &__nav-link {
      color: var(--white);
      text-decoration: none;
      padding: f.rem(8) f.rem(12);
      border-radius: f.rem(6);
      &--active {
        background-color: var(--primary);
      }
    }
    &__header {
      background-color: var(--light-grey);
      border-bottom: 1px solid var(--gray-light);
      padding: f.rem(32) 0;
      margin-bottom: f.rem(24);
    }
    &__header-inner {
      text-align: center;
    }
    &__title {
      font-size: f.rem(28);
      font-weight: 700;
      margin-block: 0 0 f.rem(8);
    }
    &__subtitle {
      font-size: f.rem(18);
      margin: 0;
      color: var(--gray);
    }
    &__body {
      display: grid;
      gap: f.rem(24);
      @media (min-width: map.get(v.$breakpoints, "lg")) {
        grid-template-columns: 1fr 320px;
      }
    }
    &__content {
      min-width: 0;
    }
    &__sidebar {
      .card {
        width: 100%;
      }
    }
    &__loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: f.rem(16);
      padding: f.rem(48) f.rem(32);
      color: var(--gray);
      p { margin: 0; font-size: f.rem(15); }
    }
    &__empty {
      text-align: center;
      padding: f.rem(32);
      color: var(--gray);
      background-color: var(--light-grey);
      border-radius: f.rem(6);
    }
    &__grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(f.rem(280), 1fr));
      gap: f.rem(24);
      margin-top: f.rem(24);
      list-style: none;
      padding: 0;
    }
    &__grid-col {
      display: flex;

      // extensions blog pour le composant .card
      .card {
        width: 100%;

        // corrige le width: inherit qui hérite 100% du content-box
        // → l'image doit compenser les 2x padding (20px chaque côté)
        .card__image {
          width: calc(100% + f.rem(40));
        }

        .card__title a {
          color: inherit;
          text-decoration: none;
          transition: color 0.2s;
          &:hover { color: var(--indigo); }
        }

        .card__description {
          display: -webkit-box;
          -webkit-line-clamp: 3;
          line-clamp: 3;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }

        .card__meta {
          display: flex;
          align-items: center;
          gap: f.rem(6);
          font-size: f.rem(12);
          color: color-mix(in srgb, var(--black) 45%, transparent);
          margin-top: f.rem(-4);
        }

        .card__dot { opacity: 0.4; }

        .card__footer {
          display: flex;
          align-items: center;
          justify-content: space-between;
          gap: f.rem(8);
          flex-wrap: wrap;
          margin-top: auto;
          padding-top: f.rem(12);
          border-top: 1px solid color-mix(in srgb, var(--black) 8%, transparent);
        }

        .card__author-name {
          font-size: f.rem(13);
          font-weight: 600;
          color: color-mix(in srgb, var(--black) 55%, transparent);
        }
      }
    }
    &__footer {
      background-color: var(--black);
      color: var(--white);
      text-align: center;
      padding: f.rem(24) 0;
      margin-top: f.rem(32);
    }
    &__footer-text {
      margin: 0;
      font-size: f.rem(14);
    }
    // Carte à la une : pleine largeur dans .blog__content
    &__content .card--featured {
      width: 100%;
      max-width: 100%;
    }
  }

  // ===== BOUTONS =====
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: f.rem(8);
    padding: f.rem(12) f.rem(24);
    border-radius: f.rem(8);
    font-weight: 600;
    font-size: f.rem(15);
    text-decoration: none;
    border: 2px solid transparent;
    cursor: pointer;
    transition: background 0.25s, color 0.25s, border-color 0.25s, transform 0.15s;

    &:hover { transform: translateY(-1px); }
    &:active { transform: translateY(0); }

    &--primary {
      background-color: var(--indigo);
      color: var(--white);
      &:hover { background-color: color-mix(in srgb, var(--indigo) 85%, black); }
    }
    &--outline {
      background-color: transparent;
      color: var(--indigo);
      border-color: var(--indigo);
      &:hover {
        background-color: var(--indigo);
        color: var(--white);
      }
    }
    &--sm { padding: f.rem(8) f.rem(16); font-size: f.rem(13); }
    &--full { width: 100%; }
  }

  // ===== HERO =====
  .blog-hero {
    position: relative;
    min-height: 520px;
    display: flex;
    align-items: center;
    background-image: url('https://img.freepik.com/free-photo/caucasian-man-working-shoot_53876-30174.jpg');
    background-size: cover;
    background-position: center;
    margin-top: 0;
    padding-top: 80px; // compense le header fixe

    &__overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg,
        color-mix(in srgb, var(--black) 75%, transparent) 0%,
        color-mix(in srgb, var(--indigo) 50%, transparent) 100%
      );
    }

    &__content {
      position: relative;
      z-index: 1;
      max-width: 680px;
      padding-block: f.rem(64);
    }

    &__label {
      display: inline-block;
      background-color: var(--indigo);
      color: var(--white);
      font-size: f.rem(12);
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: f.rem(6) f.rem(14);
      border-radius: f.rem(99);
      margin-bottom: f.rem(20);
    }

    &__title {
      font-size: clamp(f.rem(32), 5vw, f.rem(56));
      font-weight: 800;
      color: var(--white);
      line-height: 1.15;
      margin: 0 0 f.rem(20);
    }

    &__desc {
      font-size: f.rem(18);
      color: color-mix(in srgb, var(--white) 80%, transparent);
      margin: 0 0 f.rem(32);
      max-width: 520px;
    }
  }

  // ===== FILTRES CATÉGORIES =====
  .blog-cats {
    background-color: var(--white);
    border-bottom: 1px solid color-mix(in srgb, var(--black) 10%, transparent);
    position: sticky;
    top: 64px; // hauteur header
    z-index: 5;

    &__inner {
      display: flex;
      align-items: center;
      gap: f.rem(8);
      padding-block: f.rem(12);
      overflow-x: auto;
      scrollbar-width: none;
      &::-webkit-scrollbar { display: none; }
    }

    &__item {
      flex-shrink: 0;
      text-decoration: none;
      color: var(--black);
      font-size: f.rem(14);
      font-weight: 500;
      padding: f.rem(7) f.rem(18);
      border-radius: f.rem(99);
      border: 1.5px solid color-mix(in srgb, var(--black) 15%, transparent);
      transition: background 0.2s, color 0.2s, border-color 0.2s;

      &:hover, &--active {
        background-color: var(--indigo);
        color: var(--white);
        border-color: var(--indigo);
      }
    }
  }

  // ===== SECTION TITLE =====
  .blog__section-title {
    font-size: f.rem(22);
    font-weight: 700;
    margin: f.rem(36) 0 0;
    padding-bottom: f.rem(12);
    border-bottom: 2px solid color-mix(in srgb, var(--black) 10%, transparent);
    position: relative;

    &::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -2px;
      width: f.rem(48);
      height: 2px;
      background-color: var(--indigo);
    }
  }

  // ===== PAGINATION =====
  .blog-pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: f.rem(12);
    margin-top: f.rem(40);
    padding-top: f.rem(24);
    border-top: 1px solid color-mix(in srgb, var(--black) 10%, transparent);
    flex-wrap: wrap;

    &__btn {
      text-decoration: none;
      font-weight: 600;
      font-size: f.rem(14);
      color: var(--indigo);
      padding: f.rem(8) f.rem(16);
      border-radius: f.rem(8);
      border: 1.5px solid var(--indigo);
      transition: background 0.2s, color 0.2s;

      &:hover { background-color: var(--indigo); color: var(--white); }
      &--disabled {
        color: color-mix(in srgb, var(--black) 30%, transparent);
        border-color: color-mix(in srgb, var(--black) 15%, transparent);
        pointer-events: none;
      }
    }

    &__pages {
      display: flex;
      align-items: center;
      gap: f.rem(6);
    }

    &__page {
      width: f.rem(38);
      height: f.rem(38);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: f.rem(8);
      text-decoration: none;
      font-size: f.rem(14);
      font-weight: 500;
      color: var(--black);
      border: 1.5px solid color-mix(in srgb, var(--black) 15%, transparent);
      transition: background 0.2s, color 0.2s, border-color 0.2s;

      &:hover, &--active {
        background-color: var(--indigo);
        color: var(--white);
        border-color: var(--indigo);
      }
    }

    &__dots {
      color: color-mix(in srgb, var(--black) 40%, transparent);
    }
  }

  // ===== SIDEBAR =====
  .sidebar-card {
    padding: f.rem(24);
    margin-bottom: f.rem(24);
    border-radius: f.rem(12);

    &__title {
      font-size: f.rem(16);
      font-weight: 700;
      margin: 0 0 f.rem(16);
      padding-bottom: f.rem(12);
      border-bottom: 2px solid color-mix(in srgb, var(--black) 8%, transparent);
    }

    &__desc {
      font-size: f.rem(14);
      color: color-mix(in srgb, var(--white) 75%, transparent);
      margin: 0 0 f.rem(16);
    }

    &--dark {
      background: linear-gradient(135deg, var(--black), var(--indigo));
      color: var(--white);
      .sidebar-card__title { border-color: color-mix(in srgb, var(--white) 15%, transparent); }
    }

    &__title--light { color: var(--white); }
  }

  // Recherche
  .sidebar-search {
    display: flex;
    gap: f.rem(8);

    &__input {
      flex: 1;
      padding: f.rem(10) f.rem(14);
      border: 1.5px solid color-mix(in srgb, var(--black) 15%, transparent);
      border-radius: f.rem(8);
      font-size: f.rem(14);
      outline: none;
      transition: border-color 0.2s;
      &:focus { border-color: var(--indigo); }
    }

    &__btn {
      padding: f.rem(10) f.rem(14);
      background-color: var(--indigo);
      color: var(--white);
      border: none;
      border-radius: f.rem(8);
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: background 0.2s;
      &:hover { background-color: color-mix(in srgb, var(--indigo) 85%, black); }
    }
  }

  // Articles populaires
  .sidebar-popular {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: f.rem(16);

    &__item {
      display: flex;
      gap: f.rem(12);
      align-items: flex-start;
    }

    &__img {
      width: f.rem(64);
      height: f.rem(64);
      border-radius: f.rem(8);
      object-fit: cover;
      flex-shrink: 0;
    }

    &__link {
      display: block;
      font-size: f.rem(14);
      font-weight: 600;
      color: var(--black);
      text-decoration: none;
      line-height: 1.4;
      margin-bottom: f.rem(4);
      transition: color 0.2s;
      &:hover { color: var(--indigo); }
    }

    &__meta {
      font-size: f.rem(12);
      color: color-mix(in srgb, var(--black) 45%, transparent);
    }
  }

  // Tags
  .sidebar-tags {
    display: flex;
    flex-wrap: wrap;
    gap: f.rem(8);

    &__tag {
      text-decoration: none;
      font-size: f.rem(13);
      font-weight: 500;
      color: var(--black);
      padding: f.rem(6) f.rem(14);
      border-radius: f.rem(99);
      background-color: color-mix(in srgb, var(--black) 6%, transparent);
      border: 1.5px solid color-mix(in srgb, var(--black) 10%, transparent);
      transition: background 0.2s, color 0.2s, border-color 0.2s;

      &:hover {
        background-color: var(--indigo);
        color: var(--white);
        border-color: var(--indigo);
      }
    }
  }

  // Newsletter
  .sidebar-newsletter {
    display: flex;
    flex-direction: column;
    gap: f.rem(10);

    &__input {
      padding: f.rem(10) f.rem(14);
      border: 1.5px solid color-mix(in srgb, var(--white) 25%, transparent);
      border-radius: f.rem(8);
      background: color-mix(in srgb, var(--white) 10%, transparent);
      color: var(--white);
      font-size: f.rem(14);
      outline: none;
      &::placeholder { color: color-mix(in srgb, var(--white) 50%, transparent); }
      &:focus { border-color: var(--white); }
    }
  }

  // ===== MAIN BLOG (ajustement padding-top pour hero) =====
  .blog {
    padding-top: f.rem(40);
    // ...existing code...
  }
}